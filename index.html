<html>
    <head>
        <title>Snake</title>
        <style>
        html,body{
            height: 100%;
        }
        body{
            align-items: center;
            justify-content: center;
            display: flex;
            background: black;
        }
        canvas{
            border: 1px solid white;
            align-items: center;
        }
        </style>
    </head>
    <body>
        <canvas width='400' height='400' id='game'></canvas>
        <script>
        var canvas = document.getElementById('game');
        var context = canvas.getContext('2d');

        var grid = 16;
        var count = 0;

        var snake = {
            x : 160,
            y : 160,
            cells : [{x : 160, y : 160}, {x:144, }] ,
            eatFruit : false,
            death : false
        }
        var fruit  = {
            x : 320,
            y : 320
        }

        function drawFruit(){
            context.fillStyle = 'red';
            context.fillRect(fruit.x, fruit.y, grid-1, grid-1);
        }
        drawFruit();


        function drawSnake(){
            context.fillStyle = 'green';
            for(let i = 0; i < snake.cells.length ; i++)
            {
                context.fillRect(snake.cells[i].x , snake.cells[i].y , grid-1, grid-1);
            }
        }
        drawSnake();


        function moveSnake(dx, dy){
            snake.x += dx;
            snake.y += dy;
            snake.cells.unshift({x: snake.x, y: snake.y});
            snake.cells.pop();
            drawSnake();
        }
        // boundaries
        function checkBound(){
            if(snake.x < 0 || snake.x == 400 || snake.y < 0 || snake.y == 400 ){
                alert("out of box");
                snake.die = true;
                location.href='index.html';
            }
        }

        document.addEventListener('keydown',function(e){
            let dx, dy;
            // left
            if( e.keyCode ==100 ){
                dx = -grid;
                dy = 0;
            }
            // up
            else if( e.keyCode == 104){
                dx = 0;
                dy = -grid;
            }
            // right
            else if( e.keyCode == 102){
                dx = grid;
                dy = 0;
            }
            // down
            else if( e.keyCode == 98){
                dx = 0;
                dy = grid;
            }

            // Clear the canvas
            context.clearRect(0, 0, canvas.width, canvas.height);
            moveSnake(dx,dy);
            checkBound();
            drawSnake();
            drawFruit();
        });
        </script>
    </body>
</html>